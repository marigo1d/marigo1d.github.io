<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.1.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"marigo1d.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="夺命连环问！">
<meta property="og:type" content="article">
<meta property="og:title" content="QuestionBank">
<meta property="og:url" content="https://marigo1d.github.io/2025/02/03/QuestionBank/index.html">
<meta property="og:site_name" content="Marigold">
<meta property="og:description" content="夺命连环问！">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-03T06:29:25.000Z">
<meta property="article:modified_time" content="2025-03-28T02:25:31.773Z">
<meta property="article:author" content="marigo1d">
<meta property="article:tag" content="Algorithm, Java">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://marigo1d.github.io/2025/02/03/QuestionBank/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>QuestionBank | Marigold</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Marigold</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Salt, Pepper and Birds~</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://marigo1d.github.io/2025/02/03/QuestionBank/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="marigo1d">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Marigold">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          QuestionBank
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2025-02-03 14:29:25" itemprop="dateCreated datePublished" datetime="2025-02-03T14:29:25+08:00">2025-02-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2025-03-28 10:25:31" itemprop="dateModified" datetime="2025-03-28T10:25:31+08:00">2025-03-28</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>19k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>34 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>夺命连环问！</p>
<span id="more"></span>
<h1>Java Question Bank</h1>
<blockquote>
<p>以下问题为转载，提供答案为AI生成，仅作参考和可能提问范围学习</p>
</blockquote>
<p>ref: <a target="_blank" rel="noopener" href="https://www.v2ex.com/t/1106872">https://www.v2ex.com/t/1106872</a></p>
<h2 id="问题">问题</h2>
<p>Q:</p>
<p>HashSet 的底层实现说下？为什么内置 HashMap ？说下它的数据结构，为什么 loadFactor 是 0.75 ？你说泊松分布，什么是泊松分布？为什么要高位参与与运算？为什么它的 size 是 2 的 n 次方？为什么默认是 16 ？讲下它的扩容机制。什么时候转红黑树，为什么要转红黑树？为什么它是线程不安全的，它的哪些方法是线程不安全的？为什么会造成死循环？ 1.8 是如何解决这个问题的？它的线程安全的实现有什么？ ConcurrentHashMap 和 HashTable 有什么区别？说下它 1.7 和 1.8 的实现是什么？有什么区别？为什么要这么做？为什么说 ConcurrentHashMap 是线程安全的？它的 get 操作是有锁的吗？它是强一致性的吗？它为什么是弱一致性的？ ConcurrentHashMap 1.7 和 1.8 是如何扩容的？ sizeCtl 参数是干什么的，讲讲变换过程？为什么要用 volatile 修饰？说说它的功能？什么是 MESI 协议？ CPU 原语是什么？什么是可见性？ JMM 说说是什么？为什么要有 JMM ？ Happened-before 是什么？它和 synchronized 的区别是什么？锁的升级与降级说下是什么？自旋锁是什么？偏向锁是什么？ Mark-Word 说下？锁的粒度是什么？锁消除了解吗？锁会被合并吗？什么时候会发生？你刚才说了 CAS ，你能说下它是什么东西吗？为什么要引入 CAS ？ ABA 问题是如何解决的？ AQS 了解吗？它是如何实现的？ CLH 又是什么？ ReentrantLock 和 synchronized 区别是什么？为什么 ReetrantLock 能实现公平锁？默认构造器是公平锁吗？为什么不是？ Copy-on-Write 了解吗？ Fork/Join 又是什么？什么是线程，什么是协程？你刚才说了管程？你能说下这几个到底是做什么的吗？线程池说下参数，四种内置的拒绝策略，以及它的执行流程。你用过吗？为什么要这么设置参数？ I/O 密集型应用和计算密集型应用如何设置其参数？你具体的业务线程池的参数是怎么设计的？为什么？测过吗？你定制化开发过吗？线程池预留了 3 个供子类扩展的方法你知道是哪三个吗？能做什么你知道吗？ ThreadLocal 是什么？它为什么会造成内存泄漏？你实际开发中用到过吗？ Spring 事务用这个干什么的？什么是 Spring 事务的 SavePoint ？你知道死锁吗？如何解决死锁？ sleep 和 wait 的区别是什么？ BIO 、NIO 、AIO 是什么？说下区别，以及如何使用？了解 Netty 吗？如何解决粘包问题？ ChannelPipeline 又是什么？ ByteBuf 知道吗？读写指针又是什么？为什么要用它，解决了 NIO 类库的 ByteBuffer 什么问题？它和 mina 的区别是什么？它的 Zero-Copy ？了解过 FastThreadLocal 吗？它为什么比 ThreadLocal 快？有看过其中源码吗？ Netty 解决了 NIO 类库的什么问题？空轮询又是什么？ RPC 又是什么？序列化和反序列化又是什么？几个核心抽象说下。是干什么的？讲讲 Netty 的线程模型。</p>
<p>A:</p>
<p><code>HashSet</code> 底层使用了 <code>HashMap</code>，所以它的元素存储实际上是存储在一个 <code>HashMap</code> 的键（key）中。每个 <code>HashSet</code> 中的元素就是 <code>HashMap</code> 中的键，值则是一个常量对象（通常是 <code>PRESENT</code>，值为 <code>new Object()</code>）。</p>
<p>在 <code>HashMap</code>（或者 <code>HashSet</code>）中，当哈希桶中的链表长度超过一定阈值时，链表就会转变为红黑树。具体来说，<strong>当桶中的元素个数大于等于 8</strong>，且<strong>整个哈希表的大小大于等于 64 时</strong>，<code>HashMap</code> 会将该桶的链表转换为红黑树。</p>
<p>Q:</p>
<p>你说你了解虚拟机，你知道虚拟机的运行时数据区吗？哪些是线程共享的，哪些是线程独有的？你了解 JVM 调优吗？调优过吗？为什么要这么设置？垃圾回收算法有几种？为什么要分代收集？ Young 区说说它的分布结构，为什么 Eden 区 80%？为什么大对象直接进入老年代？控制的参数是什么？一个对象如果不是大对象，怎样才能进入老年代？控制的参数是什么？什么时候会发生 OOM ？你遇到过吗？怎么解决的？为什么低版本的 JDK 要把永久代内存调大点？默认大小是多少你知道吗？什么是 Major GC ，什么是 Minor GC ？什么情况下会频繁 GC ？你查看过 GC 日志吗？什么时候回收对象？引用计数和可达性分析是什么？为什么 Java 使用后者？ Python 使用前者？什么是 GCRoot ？什么类型的对象可以作为 GCRoot ？什么时候对象不可达？ Java 的四种引用说下，分别用在什么场景？你知道 JDK 源码哪里有用到 WeakReference 吗？什么是 STW ？什么是 Safepoint ？类加载的过程说下，什么时候优化，以及不同的阶段的主要优化是什么？解语法糖是什么时候？为什么在编译的时候解语法糖？什么是双亲委派模型？可以破坏吗？各个 ClassLoader 加载哪部分类的？你自定义过 ClassLoader 吗？你说你用过 Jstack 诊断 CPU 使用率飙升的情况，说下具体步骤？ Arthas 用过吗？ Class 文件格式说下，什么是魔数，Class 文件的魔数是什么？ JMX 了解吗？生产上有碰到过虚拟机的问题吗？怎么解决的？</p>
<p>ACID 说下是什么，如何实现的？你说你优化过 SQL ，怎么优化的说下。like ‘%xx%’，like ‘%xx’，like ‘xx%’ 哪种情况会用到索引，为什么？说下 MySQL 执行流程。WAL(Write-Ahead Logging) 知道吗？ redo log 和 undo log 是什么，它们作用说下。你说你改过 buffer_pool_size 等参数，为什么要改它？它里面的数据结构说下是什么？为什么冷热 3:7 ？ join_buffer 你说你也改了，为什么？什么是驱动表和被驱动表？如何优化？你说你建了索引，什么是蔟集索引，什么是非蔟集索引？什么是回表？什么时候会索引失效？你的二级索引什么用得多？为什么优先使用普通索引，而不是唯一索引？ MySQL 会死锁吗？什么是间隙锁？它会导致什么问题？ MVCC 说下是什么？ 4 种事务说下是什么？哪种或者哪几种事务隔离级别能避免幻读？能避免脏读？你说你还开启了 binlog ，能说说是什么吗？ binlog 有几种格式？你选的是哪个？为什么？ canal 用过吗？说说它的原理。MySQL 主从模式如何开启？你是如何优化 SQL 的？上亿级别的数据你是如何优化分页的？为什么不建议在 MySQL 中使用分区机制？几个主要的线程说下它们是什么？做什么的？ MySQL 读写了解吗？如何实现的？能做到强一致性吗？为什么？为什么删了数据还是磁盘空间不变？自增主键用完了会怎么样？如何解决这个问题？自增主键什么时候是不连续的？这样做的好处是什么？为什么推荐用自增主键？ B+ Tree 又是什么？如何迁移数据库？为什么不建议使用外键？在高版本的 MySQL 中 count(1) 和 count(*) 区别是什么？ order by 是如何工作的？分页机制又是什么？ ACL 和 RBAC 是什么？ PBAC 和 ABAC 知道吗说下？ grant 之后一定要刷新吗？视图用过吗？它的作用说下。视图和表的区别说下。存储过程写过吗？存储函数和存储过程的区别说下。为什么要分库分表？分库分表如何做到动态缩容/扩容？ NoSQL 用过吗？ OceanBase 了解吗？ HBase 了解吗？ HBase 有哪些坑，你碰到过吗？什么是 RegionServer ？什么时候用 NoSQL ，它能取代 RDBMS 吗？你说你用过 Elasticsearch ，能说下它的请求执行过程吗？它的总体架构说下，画一下。它的插件你用过吗？你们的分词策略是什么？倒排索引说下是什么。</p>
<p>线程和进程说下区别？线程的几种状态说下。Java 中的线程和操作系统的线程关系？动态内存分配和回收策略是什么？什么是空闲列表和指针碰撞？具体用什么数据结构存的？什么时候用它们？空闲列表四种策略说下。Page Cache 知道吗，说说它的作用。Redis 和 Kafka 中间件如何通过 Page Cache 来优化？哪些类型会导致内存泄漏？ TCP 和 HTTP 是什么？它们之间的关系说下。OSI 七层是哪七层？分别是干什么的？ TCP 和 UDP 区别是什么？什么时候会导致 TCP 抖动？ TCP 是如何保证稳定的？我就要用 UDP ，如何使它和 TCP 一样能保证数据到达？ CPU 是如何执行任务的？你知道 numa 架构吗？哪些中间件可以通过这个来怎么优化？为什么绑核能优化？什么是 Zero-Copy ？你用的中间件中有哪些用到了这个特性？内核态和用户态是什么？硬件你了解过吗？什么是 x86 ？什么是 ARM ？你说精简指令集？它精简了什么？ ARM 架构的 CPU 是什么样的？画一下。M1 芯片为什么这么快，有了解吗？ 5G 有了解吗？有点题外话了，最后问你个问题，你说你是软件通信工程，通信学的什么？选修了什么？通信是学硬件吗？光纤为什么这么快？ 8 根线和 4 根线区别？傅立叶变换说下是什么？数字信号模拟信号？你大学在班级定位？前几？</p>
<p>Redis 它的 5 种基础类型和 6 个数据结构说下。HyperLogLog 、BitMap 、GEO 、Stream 有接触过吗？什么时候用这些特殊数据结构？跳表又是什么，画一下？为什么使用跳表？为什么不用红黑树？全局 Hash 表又是什么？如何扩容的？什么是渐进式 rehash ？ Redis 怎么做到的？ IO 多路复用是什么？多路是什么？复用了什么？ AOF 和 RDB 又是什么？为什么 Redis 没有实现 WAL 机制？ AOF 持久化策略有哪三种？你们是怎么选的？ AOF 什么时候重写？为什么重写？主从复制用到了哪种日志？主从复制过程说下。主从复制什么时候增量，什么时候全量？第一次连接时，网络中断了怎么办？ Redis 主从是什么？主从从又是什么？为什么主从从可以减少主库压力？从库可以设置可写吗？从库可写会带来什么问题？主从什么时候会导致数据丢失？ Redis 十万并发能支撑住吗？如何支撑十万以上并发？为什么操作大对象支持不了十万并发？ Redis Cluster 是什么？ 你说到了 CRC16 ，你知道一致性哈希算法吗，能说下是什么吗？你说虚拟节点，说下如何实现？ Codis 了解吗？你们的 Redis 集群方案是什么？ Redis 是如何保证高可用的？哨兵机制了解吗？什么是主观下线什么是客观下线？选主的四个筛选条件优先级的条件依次递减分别是什么？打分又是什么？如何打分？缓存击穿、缓存雪崩、缓存穿透说下？如何解决？布隆过滤器又是什么？能手写个布隆过滤器吗？数据倾斜知道吗，如何解决？分布式锁了解过吗？讲讲分布式锁实现原理？ Redisson 源码看过吗？它是如何实现的分布式锁？ Lua 脚本保证原子性吗？分布式锁需要注意哪四个问题？ Redis 事务说下。缓存污染知道是什么吗？如何淘汰数据的？分别是哪八种策略？ Redis 对 lru 做了什么改变吗？ lfu 又是什么？ Redis 做了什么优化？ Redis 多线程是什么多线程？默认开启吗？你们生产中用了吗？ Redis 6 还有什么新特性？自定义过 Redis 数据类型吗？自定义过 Redis 命令吗？如何解决数据库和缓存数据不一致问题？ Pika 知道吗？ Tendis 和它的区别？如何实现一个 Key 千万并发？（这个有个群的群友的 Zoom 面试题）</p>
<p>消息中间件解决了哪几个问题？简单介绍下你用的 Kafka 。从 Topic -&gt; Record&lt;Key,Value&gt; -&gt; Producer -&gt; acks -&gt; Interceptor -&gt; Broker -&gt; Page Cache -&gt; Controller -&gt; Coordinator -&gt; Partition -&gt; Replica -&gt; Leader Replica -&gt; Follower Replica -&gt; ISR -&gt; Unclean Leader Election -&gt; Consumer -&gt; Consumer Group -&gt; Consumer Offset -&gt; Consumer Group Offset -&gt; Idempotence -&gt; Transaction -&gt; Rebalance -&gt; High Watermark -&gt; Log Deletion -&gt; Leader Epoch -&gt; LEO -&gt; Zero Copy -&gt; Consumer Heartbeat -&gt; Zookeeper 到这结束。它和 RocketMQ 、RabbitMQ 有什么区别？什么时候消息会丢失？ Producer 网络抖动后，它的消息在哪存着，内存还是磁盘还是哪里？ Producer 和 Consumer 什么时候建立的 TCP 连接？为什么这么做？ Consumer 为什么要采取 pull 的方式？ Producer 为什么采用 push 的方式？为什么用 TCP 不用 HTTP ？高水位、LEO 是什么？ Lead Epoch 知道吗？幂等性是如何实现的？说下 Kafka 事务，Kafka 事务实现的事务隔离级别？什么时候触发 Rebalance ？如何避免？如何指定发送消息到指定 Partition ？消息交付可靠性保障承诺三个说下，以及 Kafka 是如何实现它们的？哦，你说精准一次，怎么实现的？根据消息数以及消息大小，计算需要多少磁盘容量和带宽。Kafka 的 JVM 参数调优说下。JMS 了解吗？</p>
<p>Spring Bean Scope 说下。Spring 的注入方式有几种，为什么推荐用构造器注入？@Resource 和 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/Autowired">Autowired</a> 区别说下。什么是 IoC 和 AOP ？ Spring 解决了什么？@Bean 和 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/Component">Component</a> 区别说下。Spring Bean 的生命周期说下。Spring AOP 原理，各种 Advice 和 Advisor 说下。AOP 的两种代理方式是什么？ AOP 一般作用说下。三级缓存解决循环依赖的过程说下。Spring 的事务传播行为说下。Spring 事务隔离级别说下。Spring 事务实现原理。Spring 用到了哪些设计模式，能分别讲讲它是如何实现的吗，具体是哪些类？ BeanFactory 和 ApplicationContext 说下区别。说下 BeanFactory 和 FactoryBean 区别？ BeanPostProcessor 和 BeanFactoryPostProcessor 区别是什么？ Spring 事件知道吗？ Spring 如何自定义 XML 解析？各种 Smart 开头的 Bean 的前置处理器，什么时候被调用，你知道吗？ Spring Cache 是如何实现的？ Spring Data JPA 呢？ 注解扫描如何实现的，你能手写个吗？写过 Spring 的插件吗？如何实现的？代码开源了吗？</p>
<p>Q:</p>
<p>Spring MVC 执行流程说下。 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/RestController">RestController</a> 和 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/Controller">Controller</a> 区别说下。怎么取得 URL 中的 { } 里面的变量？ Spring MVC 和 Struts2 比有什么优点？ Spring MVC 怎么样设定重定向和转发的？说下 Spring MVC 的常用注解。如何解决 POST 请求中文乱码问题，GET 的又如何处理呢？ Interceptor 和 Filter 区别？ Spring MVC 的异常处理 ？怎样在方法里面得到 Request ，或者 Session ？ Spring MVC 中函数的返回值是什么？怎么样把 ModelMap 里面的数据放入 Session 里面？ Spring MVC 的控制器是不是单例模式,如果是,有什么问题,怎么解决？ Spring MVC 的 RequestMapping 的方法是线程安全的吗？为什么？介绍下 WebApplicationContext 。跨域问题如何解决？如何解决全局异常？ validation 有了解吗？用过吗？ Json 处理如何实现的？哦，你刚才说了父子容器，能讲讲什么是父子容器吗？ Spring MVC 国际化有了解过吗？怎么实现的</p>
<p>A:</p>
<p>Q:</p>
<p>Spring Boot 是如何实现自动装配的？运行 Spring Boot 有几种方式？ Spring Boot Starter 工作原理。Spring Boot 核心注解说下。 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/Enable">Enable</a> 类型注解是如何实现的？@Conditional 类型注解呢？自定义过吗？说下异步调用 @<a target="_blank" rel="noopener" href="https://www.v2ex.com/member/Async">Async</a> 。什么是 YAML ？ Spring Boot Profiles 如何实现的？ bootstrap.properties 和 application.properties 说下区别。Spring Boot 事件和 Spring 事件有什么关系？ Spring Boot Actuator 了解过吗？说一下。Spring Batcher 用过吗，说下。Spring Boot 是如何实现内嵌 Servlet 容器的，在哪行代码启动的？ Spring Boot 完美实现了模块化编程，你认同吗？</p>
<p>A:</p>
<p>Q:</p>
<p>Spring Cloud Netflix 听说你了解。画一下 Spring Cloud Netflix 架构图。说说 Eureka 默认多少秒发送心跳？增量还是全量？ CP 还是 AP ？如何防止脑裂的？二级缓存知道吗？ Eureaka 的自我保护模式说下。ServiceInstance 和 DiscoryClient 知道吗？是干嘛的？分布式事务除了两段提交，还有什么实现方式？哦，你说 Saga ，Saga 你说下是什么？ Ribbon 是什么说一下，它解决了什么问题？ Feign 又是什么？它和 Ribbon 什么关系？ Dubbo 和 Feign 区别？ Dubbo 的 SPI 知道吗？ Zuul 是什么？它和 Nginx 有什么区别？除了 Zuul 还有什么网关可选？ Hystrix 是什么？它是如何实现的？熔断、降级和限流他们的区别说一下。Hystrix 信号量机制，隔离策略细粒度控制如何做的？了解过他们的源码实现吗？看过源码吗？你优化过吗？微服务十一点说一下分别是什么？分布式配置中心有哪些？你们用的 Apollo 还是 Spring Config 还是其他的？为什么？服务监控有了解吗？什么是幂等？如何实现接口幂等？如何实现分布式 Session ？有更好的方法吗？哦，你说了 JWT ，能详细说下吗？不同系统的间授权的 OAuth2 了解吗？</p>
<p>A:</p>
<p>Q:</p>
<p>MyBatis 了解吗？一级缓存，二级缓存？# 和 $ 说下。如何实现的动态 SQL ？ ORM 是什么？和 Hibernate 区别？ MyBatis 工作原理？ MyBatis 都有哪些 Executor 执行器？它们之间的区别是什么？ MyBatis 中如何指定使用哪一种 Executor 执行器？模糊查询 like 语句该怎么写？ MyBatis 是否支持延迟加载？如果支持，它的实现原理是什么？ MyBatis 如何执行批量操作？ SqlSessionFactoryBean 是什么？如何实现和 Spring 的整合的？ Mapper 方法可以重载吗？为什么不可以？ MyBatis 是如何将 SQL 执行结果封装为目标对象并返回的？都有哪些映射形式？哦，你说简单封装了 JDBC ，说下 JDBC 几个重要的类。为什么要预编译？有什么好处吗？</p>
<p>A:</p>
<p>Q:</p>
<p>Nginx 了解吗，说下其优缺点？怎么实现 Nginx 集群？什么是反向代理？和正向代理区别是什么？ Tomcat 和 Nginx 区别？限流怎么做的，有哪三种？令牌桶和漏斗算法是什么，区别是什么？如何在其之上使用 Lua 脚本？有几种负载均衡策略？你们生产上用的哪个？为什么？为什么 Nginx 性能这么高？有没有更高的？ F5 又是什么？ Nginx 是怎么处理请求的？ Nginx 目录有哪些？ nginx.conf 配置过吗？有哪些属性模块？静态资源放哪？虚拟主机配置？ location 说下。location 语法说下。</p>
<p>A:</p>
<p><strong>Nginx 了解吗，说下其优缺点？</strong></p>
<p><strong>优点：</strong></p>
<ol>
<li><strong>高性能</strong>：Nginx 采用事件驱动架构，能够处理大量并发连接，适合高并发场景。</li>
<li><strong>轻量级</strong>：资源占用少，适合在资源有限的服务器上运行。</li>
<li><strong>反向代理</strong>：支持反向代理，负载均衡，缓存等功能。</li>
<li><strong>高扩展性</strong>：支持模块化设计，可以通过第三方模块扩展功能。</li>
<li><strong>热部署</strong>：支持不停止服务的情况下更新配置和升级。</li>
</ol>
<p><strong>缺点：</strong></p>
<ol>
<li><strong>动态内容处理能力较弱</strong>：Nginx 本身不擅长处理动态内容，通常需要与后端应用服务器（如 Tomcat）配合使用。</li>
<li><strong>配置复杂</strong>：对于初学者来说，Nginx 的配置文件可能比较复杂，学习曲线较陡。</li>
</ol>
<p><strong>怎么实现 Nginx 集群？</strong></p>
<p>Nginx 集群通常通过以下方式实现：</p>
<ol>
<li><strong>负载均衡</strong>：使用 Nginx 作为负载均衡器，将请求分发到多个后端服务器。</li>
<li><strong>高可用</strong>：通过 Keepalived 或 HAProxy 实现 Nginx 的高可用，避免单点故障。</li>
<li><strong>DNS 轮询</strong>：通过 DNS 轮询将请求分发到多个 Nginx 服务器。</li>
<li><strong>分布式部署</strong>：在不同地理位置的服务器上部署 Nginx，通过 CDN 或全局负载均衡器进行请求分发。</li>
</ol>
<p><strong>什么是反向代理？和正向代理区别是什么？</strong></p>
<ul>
<li><strong>反向代理</strong>：客户端请求发送到反向代理服务器，反向代理服务器将请求转发到后端服务器，并将后端服务器的响应返回给客户端。客户端不知道后端服务器的存在。</li>
<li><strong>正向代理</strong>：客户端通过正向代理服务器访问外部资源，外部资源不知道客户端的真实 IP，只知道代理服务器的 IP。</li>
</ul>
<p><strong>Tomcat 和 Nginx 区别？</strong></p>
<ul>
<li><strong>Nginx</strong>：主要用于处理静态内容、反向代理、负载均衡等，适合高并发场景。</li>
<li><strong>Tomcat</strong>：是一个 Java 应用服务器，主要用于处理动态内容，如 JSP、Servlet 等。</li>
</ul>
<p><strong>限流怎么做的，有哪三种？</strong></p>
<ol>
<li><strong>计数器算法</strong>：在固定时间窗口内限制请求数量。</li>
<li><strong>令牌桶算法</strong>：以固定速率生成令牌，请求需要消耗令牌才能被处理。</li>
<li><strong>漏桶算法</strong>：请求以固定速率被处理，超出速率的请求会被丢弃或排队。</li>
</ol>
<p><strong>令牌桶和漏斗算法是什么，区别是什么？</strong></p>
<ul>
<li><strong>令牌桶算法</strong>：以固定速率生成令牌，令牌被放入桶中，请求需要消耗令牌才能被处理。允许突发流量。</li>
<li><strong>漏桶算法</strong>：请求以固定速率被处理，超出速率的请求会被丢弃或排队。不允许突发流量。</li>
</ul>
<p><strong>如何在其之上使用 Lua 脚本？</strong></p>
<p>Nginx 通过 <code>ngx_lua</code> 模块支持 Lua 脚本，可以在配置文件中嵌入 Lua 代码，实现复杂的逻辑处理。</p>
<p><strong>有几种负载均衡策略？你们生产上用的哪个？为什么？</strong></p>
<p>常见的负载均衡策略：</p>
<ol>
<li><strong>轮询（Round Robin）</strong>：依次将请求分发到每个服务器。</li>
<li><strong>加权轮询（Weighted Round Robin）</strong>：根据服务器权重分配请求。</li>
<li><strong>IP Hash</strong>：根据客户端 IP 分配请求，确保同一客户端始终访问同一服务器。</li>
<li><strong>最少连接（Least Connections）</strong>：将请求分发到当前连接数最少的服务器。</li>
</ol>
<p>生产环境通常使用<strong>加权轮询</strong>或<strong>最少连接</strong>，因为它们能更好地平衡服务器负载。</p>
<p><strong>为什么 Nginx 性能这么高？有没有更高的？</strong></p>
<p>Nginx 性能高的原因：</p>
<ol>
<li><strong>事件驱动架构</strong>：非阻塞 I/O 模型，能够高效处理大量并发连接。</li>
<li><strong>多进程模型</strong>：利用多核 CPU，每个工作进程独立处理请求。</li>
<li><strong>内存管理优化</strong>：减少内存分配和释放的开销。</li>
</ol>
<p>更高的性能可以选择 <strong>Caddy</strong> 或 <strong>Envoy</strong>，它们在特定场景下可能表现更好。</p>
<p><strong>F5 又是什么？</strong></p>
<p>F5 是一家提供应用交付控制器（ADC）和负载均衡解决方案的公司，其产品（如 BIG-IP）常用于企业级负载均衡和应用加速。</p>
<p><strong>Nginx 是怎么处理请求的？</strong></p>
<ol>
<li><strong>接收请求</strong>：Nginx 监听端口，接收客户端请求。</li>
<li><strong>解析请求</strong>：解析 HTTP 请求头，确定请求的虚拟主机和 location。</li>
<li><strong>处理请求</strong>：根据配置文件的规则处理请求，如静态文件直接返回，动态请求转发到后端服务器。</li>
<li><strong>返回响应</strong>：将处理结果返回给客户端。</li>
</ol>
<p><strong>Nginx 目录有哪些？</strong></p>
<ul>
<li><strong>/usr/local/nginx</strong>：Nginx 安装目录。</li>
<li><strong>/usr/local/nginx/conf</strong>：配置文件目录，包含 <code>nginx.conf</code>。</li>
<li><strong>/usr/local/nginx/logs</strong>：日志文件目录。</li>
<li><strong>/usr/local/nginx/html</strong>：默认的静态文件存放目录。</li>
</ul>
<p><strong>nginx.conf 配置过吗？有哪些属性模块？</strong></p>
<p><code>nginx.conf</code> 是 Nginx 的主配置文件，常见的配置模块包括：</p>
<ul>
<li><strong>http</strong>：HTTP 相关配置。</li>
<li><strong>server</strong>：虚拟主机配置。</li>
<li><strong>location</strong>：URL 路径匹配和处理规则。</li>
<li><strong>events</strong>：事件处理模型配置。</li>
<li><strong>upstream</strong>：负载均衡后端服务器配置。</li>
</ul>
<p>实例：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局配置</span></span><br><span class="line"><span class="attribute">user</span>  nginx;</span><br><span class="line"><span class="attribute">worker_processes</span>  auto;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="comment"># 网站 A 的虚拟主机配置</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  www.example.com;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   /var/www/example;</span><br><span class="line">            <span class="attribute">index</span>  index.html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 网站 B 的虚拟主机配置</span></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  www.test.com;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://127.0.0.1:8080;  <span class="comment"># 将请求转发到本地的 8080 端口</span></span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>静态资源放哪？</strong></p>
<p>静态资源通常放在 Nginx 的 <code>html</code> 目录下，或者通过 <code>location</code> 配置指定其他目录。</p>
<p><strong>虚拟主机配置？</strong></p>
<p>虚拟主机配置在 <code>nginx.conf</code> 中的 <code>server</code> 块中，通过 <code>server_name</code> 指定域名，<code>listen</code> 指定端口。</p>
<p><strong>location 说下。</strong></p>
<p><code>location</code> 用于匹配 URL 路径，并指定如何处理请求。例如：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">location</span> /static/ &#123;</span><br><span class="line">    <span class="attribute">root</span> /var/www/html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>location 语法说下。</strong></p>
<p><code>location</code> 语法：</p>
<ul>
<li><strong>=</strong>：精确匹配。</li>
<li><strong>~</strong>：区分大小写的正则匹配。</li>
<li><strong>~</strong>*：不区分大小写的正则匹配。</li>
<li><strong>^~</strong>：前缀匹配，不进行正则匹配。</li>
</ul>
<p>例如：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">location</span> = /exact &#123;</span><br><span class="line">    <span class="comment"># 精确匹配 /exact</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">location</span> <span class="regexp">~* \.php$</span> &#123;</span><br><span class="line">    <span class="comment"># 不区分大小写匹配 .php 结尾的 URL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Q:</p>
<p>Tomcat 你也了解？什么是 Tomcat 的 Connector ？ Service 、Connector 、Container 介绍下它们。详细说下它们是如何处理请求的，能画下它们的架构图吗？如何部署的？一定要放到 webapps 目录下吗？在哪配置？为什么不用 Jetty ？区别是什么？ Servlet 是线程安全的吗？为什么？怎样让它线程安全？ Servlet 初始化过程？ init 方法什么时候调用？ Servlet 什么时候第一次初始化？ JSP 知道吗？有几个内置对象？你说 JSP 是特殊的 Servlet ，你看过源码吗？ JSP 如何热部署的？ EL 表达式知道吗？如何实现的？（大四神州集团校招的时候被问到的）。</p>
<p>A:</p>
<p>云原生了解吗？云原生十二要素说下。Cloud Foundry 平台你知道吗？ HeroKu ？ Kong ？</p>
<p>Q:</p>
<p>哦？你说是六边形架构？你说下什么是六边形架构？整洁架构呢？它们之间的区别？分层架构了解吗？ MVP 、MVC 架构说下。负载均衡算法七种说下。如何实现一个秒杀系统。一定不会超卖吗？如何解决？什么是 SOA ？什么是微服务？以及两者的区别。什么是事件驱动架构？ CAP 和 BASE 说下是什么？最终一致性和人弱一致性什么关系？画一下你们系统的整体架构图。QPS 和 TPS ？你们的 QPS 是多少知道吗？压测过吗？说下点击网页的请求过程。哦，你说你是蓝绿部署，什么是蓝绿部署？什么是金丝雀发布？如何实现？</p>
<p>A:</p>
<p>Q:</p>
<p>Docker 你也用？怎么构建 Docker 镜像？ Docker 和虚拟机的区别？ Docker 好处说下？ Kubernetes 你也知道，说下它的组成结构？ etcd 是什么？为什么不用 Zookeeper ？ pod 又是什么？你们生产上怎么用的？如何控制滚动更新过程？</p>
<p>A:</p>
<p>Q:</p>
<p>你说你知道 DDD ？能简单说下吗？你们代码落地了吗？是如何拆分服务的？事件风暴又是什么？你们有 Code Review 吗？具体规矩？领域事件是什么？子域、通用域、核心域、支撑域、限界上下文、聚合、聚合根、实体、值对象又是什么？你们有 EventBus 吗？如何使用的？</p>
<p>A:</p>
<h2 id="刷题">刷题</h2>
<p>算法：代码随想录、LCR75、LChot100、面试题150题 就照着上面顺序刷下去就好了，保持手感，做好笔记。</p>
<p>剑指 offer <a target="_blank" rel="noopener" href="https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13">https://www.nowcoder.com/exam/oj/ta?page=1&amp;tpId=13&amp;type=13</a></p>
<p>leetcode hot 100 <a target="_blank" rel="noopener" href="https://leetcode.cn/studyplan/top-100-liked/">https://leetcode.cn/studyplan/top-100-liked/</a></p>
<p>给二叉树后序和中序遍历，写前序遍历。手写个快排。翻转一下链表。O(1) 空间复杂度找出链表有环。DFS 找出二叉树搜索树第 k 大节点（这些都真的碰过了）。</p>
<p>实现一个多线程类，并用该线程类实例化 3 个线程 A,B,C ； A 线程打印字符 A,B 线程打印字符 B ，C 线程打印字符 C ；启动这 3 个线程，要求启动线程的顺序为 C 线程-&gt;B 线程-&gt;A 线程，并且最后输出内容为：A B C 。禁止使用 sleep 函数。阿里应该还有各种多线程打印的问题，这个得准备。这些只是最最最基础的内容。</p>
<p>接下来应该是更高级的算法题目，至少是 LeetCode Menium 难度的，翻转链表确实有点初级，练个半个小时就搞定了。暂时还没碰到，碰到我也挂了。应该是动态规划，滑动窗口，字符串的问题，手写 O(1) 时间复杂度的 LRU ，回溯，贪心。</p>
<p>外排序（磁盘排序）</p>
<p>java 多线程求10000以内质数</p>
<p>thread - runnable - Callable&lt;T&gt;+Future+threadpool.submit(lambda)</p>
<p>java 外排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExternalSort</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">CHUNK_SIZE</span> <span class="operator">=</span> <span class="number">10000</span>; <span class="comment">// 假设每次处理10000行</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">inputFile</span> <span class="operator">=</span> <span class="string">&quot;input.txt&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">outputFile</span> <span class="operator">=</span> <span class="string">&quot;output.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; tempFiles = splitAndSortChunks(inputFile);</span><br><span class="line">        mergeSortedFiles(tempFiles, outputFile);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Sorting completed. Sorted data in &quot;</span> + outputFile);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第一步：分块排序</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title function_">splitAndSortChunks</span><span class="params">(String inputFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        List&lt;String&gt; tempFiles = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(inputFile));</span><br><span class="line">        List&lt;String&gt; lines = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        String line;</span><br><span class="line">        <span class="type">int</span> <span class="variable">fileIndex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            lines.add(line);</span><br><span class="line">            <span class="keyword">if</span> (lines.size() &gt;= CHUNK_SIZE) &#123;</span><br><span class="line">                tempFiles.add(writeSortedChunk(lines, fileIndex++));</span><br><span class="line">                lines.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 处理最后剩余的数据</span></span><br><span class="line">        <span class="keyword">if</span> (!lines.isEmpty()) &#123;</span><br><span class="line">            tempFiles.add(writeSortedChunk(lines, fileIndex++));</span><br><span class="line">        &#125;</span><br><span class="line">        reader.close();</span><br><span class="line">        <span class="keyword">return</span> tempFiles;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">writeSortedChunk</span><span class="params">(List&lt;String&gt; lines, <span class="type">int</span> fileIndex)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        lines.sort(String::compareTo);</span><br><span class="line">        <span class="type">String</span> <span class="variable">tempFile</span> <span class="operator">=</span> <span class="string">&quot;temp_&quot;</span> + fileIndex + <span class="string">&quot;.txt&quot;</span>;</span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(tempFile));</span><br><span class="line">        <span class="keyword">for</span> (String line : lines) &#123;</span><br><span class="line">            writer.write(line);</span><br><span class="line">            writer.newLine();</span><br><span class="line">        &#125;</span><br><span class="line">        writer.close();</span><br><span class="line">        <span class="keyword">return</span> tempFile;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 第二步：K 路归并排序</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">mergeSortedFiles</span><span class="params">(List&lt;String&gt; tempFiles, String outputFile)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        PriorityQueue&lt;FileEntry&gt; minHeap = <span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();</span><br><span class="line">        List&lt;BufferedReader&gt; readers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String tempFile : tempFiles) &#123;</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(tempFile));</span><br><span class="line">            readers.add(reader);</span><br><span class="line">            <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> reader.readLine();</span><br><span class="line">            <span class="keyword">if</span> (line != <span class="literal">null</span>) &#123;</span><br><span class="line">                minHeap.add(<span class="keyword">new</span> <span class="title class_">FileEntry</span>(line, reader));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">BufferedWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(<span class="keyword">new</span> <span class="title class_">FileWriter</span>(outputFile));</span><br><span class="line">        <span class="keyword">while</span> (!minHeap.isEmpty()) &#123;</span><br><span class="line">            <span class="type">FileEntry</span> <span class="variable">entry</span> <span class="operator">=</span> minHeap.poll();</span><br><span class="line">            writer.write(entry.line);</span><br><span class="line">            writer.newLine();</span><br><span class="line">            </span><br><span class="line">            <span class="type">String</span> <span class="variable">nextLine</span> <span class="operator">=</span> entry.reader.readLine();</span><br><span class="line">            <span class="keyword">if</span> (nextLine != <span class="literal">null</span>) &#123;</span><br><span class="line">                minHeap.add(<span class="keyword">new</span> <span class="title class_">FileEntry</span>(nextLine, entry.reader));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                entry.reader.close();  <span class="comment">// 关闭文件</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        writer.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 删除临时文件</span></span><br><span class="line">        <span class="keyword">for</span> (String tempFile : tempFiles) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">File</span>(tempFile).delete();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 优先队列元素定义</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">FileEntry</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;FileEntry&gt; &#123;</span><br><span class="line">        String line;</span><br><span class="line">        BufferedReader reader;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">FileEntry</span><span class="params">(String line, BufferedReader reader)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.line = line;</span><br><span class="line">            <span class="built_in">this</span>.reader = reader;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(FileEntry other)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.line.compareTo(other.line);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>多线程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultiThread</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> List&lt;Integer&gt; primes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isPrime</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (num &lt;= <span class="number">0</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>();</span><br><span class="line">        <span class="keyword">if</span> (num &lt;= <span class="number">2</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i * i &lt; num; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (num % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">findPrimes</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= end; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isPrime(i)) res.add(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// thread</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">myThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> start;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">        myThread(<span class="type">int</span> s, <span class="type">int</span> e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">this</span>.start = s;</span><br><span class="line">            <span class="built_in">this</span>.end = e;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= end; ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (MultiThread.isPrime(i)) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">                        primes.add(i);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">threadMethod</span><span class="params">(<span class="type">int</span> thread_cnt, <span class="type">int</span> max_num)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">chunk</span> <span class="operator">=</span> max_num / thread_cnt;</span><br><span class="line">        Thread[] t_list = <span class="keyword">new</span> <span class="title class_">Thread</span>[max_num];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; thread_cnt; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            t_list[i] = <span class="keyword">new</span> <span class="title class_">myThread</span>(i * chunk + <span class="number">1</span>, (i + <span class="number">1</span>) * chunk);</span><br><span class="line">            t_list[i].start();</span><br><span class="line">            t_list[i].join();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : primes) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyRunnable</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> start;</span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">        MyRunnable(<span class="type">int</span> s, <span class="type">int</span> e)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">this</span>.start = s;</span><br><span class="line">            <span class="built_in">this</span>.end = e;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start; i &lt;= end; ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (MultiThread.isPrime(i)) &#123;</span><br><span class="line">                    <span class="keyword">synchronized</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">                        primes.add(i);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">runnableMethod</span><span class="params">(<span class="type">int</span> thread_cnt, <span class="type">int</span> max_num)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">chunk</span> <span class="operator">=</span> max_num / thread_cnt;</span><br><span class="line">        Thread[] tt_list = <span class="keyword">new</span> <span class="title class_">Thread</span>[thread_cnt];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; thread_cnt; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">MyRunnable</span> <span class="variable">myRunnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRunnable</span>(i * chunk + <span class="number">1</span>, (i + <span class="number">1</span>) * chunk);</span><br><span class="line">            tt_list[i] = <span class="keyword">new</span> <span class="title class_">Thread</span>(myRunnable);</span><br><span class="line">            tt_list[i].start();</span><br><span class="line">            tt_list[i].join();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i : primes) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">executorMethod</span><span class="params">(<span class="type">int</span> thread_cnt, <span class="type">int</span> max_num)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(thread_cnt);</span><br><span class="line">        List&lt;Future&lt;List&lt;Integer&gt;&gt;&gt; futures = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">chunkSize</span> <span class="operator">=</span> max_num / thread_cnt;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; thread_cnt; ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">start</span> <span class="operator">=</span> i * chunkSize + <span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> (i + <span class="number">1</span>) * chunkSize;</span><br><span class="line">            futures.add(executor.submit(() -&gt; findPrimes(start, end)));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;Integer&gt; primes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Future&lt;List&lt;Integer&gt;&gt; future : futures) &#123;</span><br><span class="line">            primes.addAll(future.get());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        executor.shutdown();</span><br><span class="line">        System.out.println(primes);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">thread_cnt</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">max_num</span> <span class="operator">=</span> <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        threadMethod(thread_cnt, max_num);</span></span><br><span class="line"><span class="comment">//        runnableMethod(thread_cnt, max_num);</span></span><br><span class="line">        executorMethod(thread_cnt, max_num);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>快速排序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> start, <span class="type">int</span> end)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (start &lt; end) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot_idx</span> <span class="operator">=</span> partition(nums, start, end);</span><br><span class="line">        quickSort(nums, start, pivot_idx - <span class="number">1</span>);</span><br><span class="line">        quickSort(nums, pivot_idx + <span class="number">1</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> start, <span class="type">int</span> end)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">pivot_val</span> <span class="operator">=</span> nums[end];</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> start;</span><br><span class="line"> 	<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> start; j &lt; end; ++j)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums[j] &lt; pivot_val) &#123;</span><br><span class="line">            swap(nums, i++, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(nums, i, end);</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> i, <span class="type">int</span> j)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">tmp</span> <span class="operator">=</span> nums[i];</span><br><span class="line">    nums[i] = nums[j];</span><br><span class="line">    nums[j] = tmp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="杂">杂</h2>
<p>Java基础：韩顺平</p>
<p>Redis看黑马，做了黑马点评</p>
<p>JUC、JVM看稀土的竹子爱熊猫</p>
<p>Spring可以看看廖雪峰、黑马。</p>
<p>计网、操作系统、MySQL：小林coding</p>
<p>其他推荐：极客时间的MySQL45讲、《对线面试官》、黑马23年面经</p>
<p>微信朋友圈系统设计（feed流系统）</p>
<p>给一个生成65536内随机数的函数对20w腾讯员工公平抽奖（k进制）</p>
<p>用udp实现tcp（http3）</p>
<p>实现atoi原型</p>
<p>位图桶排序</p>
<p>mysql联合索引实现原理和场景分析（压力，问的很怪，需要根据原理去否定一些离谱的要求）</p>
<p>智力题30！和int64谁更大</p>
<p>智力题 倒水10 7 3 从10 0 0倒出5 5 0</p>
<p>sleep能不能实现准确的微秒级别的睡眠时间（很怪，扯了扯线程切换和线程状态就不追问了，转问操作系统细节）</p>
<p>八股：黑马程序员+大话面试+竹子爱熊猫+小林coding</p>
<p>算法：hot100+top150反复刷，面试前刷CodeTop（跟着代码随想录入门之后每天定时刷三道）</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Algorithm-Java/" rel="tag"># Algorithm, Java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/01/17/MQ-Learning-Record/" rel="prev" title="MQ-Learning-Record">
      <i class="fa fa-chevron-left"></i> MQ-Learning-Record
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/02/19/Project/" rel="next" title="Project">
      Project <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">Java Question Bank</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%97%AE%E9%A2%98"><span class="nav-text">问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%B7%E9%A2%98"><span class="nav-text">刷题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%82"><span class="nav-text">杂</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="marigo1d"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">marigo1d</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">16</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/marigo1d" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;marigo1d" rel="noopener" target="_blank">GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">marigo1d</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">460k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">13:57</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
